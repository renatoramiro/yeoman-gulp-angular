!function(){"use strict";angular.module("medicos2",["ngSanitize","ngResource","ngRoute"])}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("medicos2").directive("acmeNavbar",e)}(),function(){"use strict";angular.module("medicos2").service("MainService",["MainFactory",function(e){this.generate=function(t){return e.save(t)}}])}(),function(){"use strict";angular.module("medicos2").factory("MainFactory",["$resource","Configuration",function(e,t){return e(t.API+"/api/v1/report",{},{})}])}(),function(){"use strict";angular.module("medicos2").factory("PatientService",function(){var e={getPatient:function(e){return e}};return e}).controller("MainController",["$scope","$timeout","$location","PatientService","$rootScope","$routeParams","MainService","$http","$sce","Configuration",function(e,t,a,n,i,o,r,l,s,d){e.user={},e.patient={procedimentos:[]},e.formPatient={},e.list=[1,2,3,4,5],e.list3=[1,2,3],e.print=function(e){var t=d.API+"/api/v1/report/geap",a=d.API+"/api/v1/report/unimed",n="";"GEAP"===e.convenio?n=t:"Unimed"===e.convenio&&(n=a),l.get(n,{params:{data:e},responseType:"arraybuffer"}).success(function(e,t,a,n){var i=new Blob([e],{type:"application/pdf"}),o=URL.createObjectURL(i);window.open(s.trustAsResourceUrl(o))}).error(function(e){console.error(e)})},e.addOnList=function(){void 0===e.patient.procedimentos&&(e.patient.procedimentos=[]),e.patient.procedimentos.length<5&&e.patient.procedimentos.push({procedimento:"",descricao:"",quantidade:""})},e.removeItemList=function(t){e.patient.procedimentos.splice(t,1)},o.anameneseId&&(e.patient=n.get(o.anameneseId))}])}(),function(){"use strict";angular.module("medicos2").service("PatientService",["PatientFactory",function(e){this.query=function(t){return e.query({},{parentId:t})},this.get=function(t){return e.get({},{_id:t})},this.save=function(t){return e.save(t)},this.update=function(t,a){return e.update({_id:t},a)},this.remove=function(t){return e["delete"]({_id:t})}}])}(),function(){"use strict";angular.module("medicos2").factory("PatientFactory",["$resource","Configuration",function(e,t){return e(t.API+"/api/v1/patients/:_id",{_id:"@_id"},{update:{method:"PUT"},query:{method:"GET",params:{parentId:"@parentId"},isArray:!0}})}])}(),function(){"use strict";angular.module("medicos2").directive("newpatient",function(){return{templateUrl:"app/dashboard/new_patient.html"}}).directive("patientsaved",function(){return{templateUrl:"app/dashboard/patient_saved.html"}}).directive("patientupdated",function(){return{templateUrl:"app/dashboard/patient_updated.html"}}).directive("patientremoved",function(){return{templateUrl:"app/dashboard/patient_removed.html"}}).directive("modalpatientremoved",function(){return{templateUrl:"app/dashboard/modal_remove_patient.html"}})}(),function(){"use strict";angular.module("medicos2").controller("DashboardController",["$scope","$rootScope","$location","$timeout","$routeParams","PatientService",function(e,t,a,n,i,o){if(!angular.isDefined(t.currentUser)&&!angular.isDefined(t.currentUser._id))return void a.path("/login");e.patients=o.query(t.currentUser._id),e.newPatient=!1,e.actionForm="",e.form={},e.patient={},e.saved=!1,e.updated=!1,e.deleted=!1;var r=function(t){e.patient=o.get(t)};i.patientId&&r(i.patientId),e.createPatient=function(){e.newPatient=!0,e.actionForm="Salvar"},e.save=function(){e.form.patient.$valid&&(e.patient.parentId=t.currentUser._id,o.save(e.patient).$promise.then(function(){e.newPatient=!1,e.patient={},e.saved=!0,e.patients=o.query(t.currentUser._id),n(function(){e.saved=!1},1e3)}))},e.editPatient=function(t){e.newPatient=!0,e.actionForm="Atualizar",e.patient=o.get(t)},e.update=function(){e.form.patient.$valid&&(e.patient.parentId=t.currentUser._id,o.update(e.patient._id,e.patient).$promise.then(function(){e.newPatient=!1,e.patient={},e.updated=!0,e.patients=o.query(t.currentUser._id),n(function(){e.updated=!1},1e3)}))},e.openModalRemove=function(t){e.patient=t},e.remove=function(a){o.remove(a).$promise.then(function(){e.deleted=!0,e.patient={},e.patients=o.query(t.currentUser._id),n(function(){e.deleted=!1},1e3)})},e.cancel=function(){e.newPatient=!1,e.patient={},e.actionForm="",l(e.form.patient)};var l=function(e){void 0!==e&&0!==Object.keys(e).length&&(e.$setPristine(),e.$setUntouched(),e.$setDirty())}}])}(),function(){"use strict";angular.module("medicos2").service("Configuration",["$location",function(e){return this.API=e.host().indexOf("heroku")>-1?"https://fast-plains-6359.herokuapp.com":"http://localhost:4000"}])}(),function(){"use strict";angular.module("medicos2").controller("AccountController",["$scope","$rootScope","$window","$location","AccountService",function(e,t,a,n,i){e.user={},e.error=void 0,e.success=void 0,e.login=function(o){e.error=void 0,i.login(o.username,o.password).$promise.then(function(e){t.currentUser=e.currentUser;var i=e.token;void 0!==i&&(a.sessionStorage.token=i),n.path("/dashboard")},function(t){e.user={},e.error=t.data})},e.register=function(t){e.error=void 0,i.register(t).$promise.then(function(t){e.user={},e.success=t},function(t){e.error=t.data})},e.logout=function(){delete t.currentUser,delete a.sessionStorage.token,n.path("/login")}}])}(),function(){"use strict";angular.module("medicos2").service("AccountService",["LoginFactory","RegisterFactory","MeFactory",function(e,t,a){this.login=function(t,a){return e.login({username:t,password:a})},this.register=function(e){return t.register({username:e.username,email:e.email,name:e.name,password:e.password})},this.me=function(){return a.get()}}])}(),function(){"use strict";angular.module("medicos2").factory("LoginFactory",["$resource","Configuration",function(e,t){return e(t.API+"/api/v1/login",{},{login:{method:"POST"}})}]).factory("RegisterFactory",["$resource","Configuration",function(e,t){return e(t.API+"/api/v1/register",{},{register:{method:"POST"}})}]).factory("MeFactory",["$resource","Configuration",function(e,t){return e(t.API+"/api/v1/me",{},{})}]).factory("authInterceptor",["$rootScope","$q","$window","$location",function(e,t,a,n){return{request:function(e){return e.headers=e.headers||{},a.sessionStorage.token&&(e.headers["x-access-token"]=a.sessionStorage.token),e},response:function(e){var n=e.headers(),i=n["x-access-token"];return void 0!==i&&(a.sessionStorage.token=i),e||t.when(e)},responseError:function(i){return 404===i.status&&(delete a.sessionStorage.token,delete e.currentUser,n.path("/login")),t.reject(i)}}}]).factory("AuthResolver",["$q","$rootScope",function(e,t){return{resolve:function(){var a=e.defer();return t.$watch("currentUser",function(e){try{angular.isDefined(e)&&angular.isDefined(e._id)&&a.resolve(e)}catch(t){a.reject(t)}}),a.promise}}}]).config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]).run(["$rootScope","$window","AccountService",function(e,t,a){void 0!==t.sessionStorage.token&&a.me().$promise.then(function(t){e.currentUser=t},function(){e.currentUser=null})}])}(),function(){"use strict";function e(e){e.when("/login",{templateUrl:"app/account/login.html",controller:"AccountController",controllerAs:"account"}).when("/register",{templateUrl:"app/account/register.html",controller:"AccountController",controllerAs:"account"}).when("/dashboard",{templateUrl:"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"dash",resolve:{auth:["AuthResolver",function(e){return e.resolve()}]}}).when("/patients/:patientId",{templateUrl:"app/dashboard/show.html",controller:"DashboardController",controllerAs:"dash",resolve:{auth:["AuthResolver",function(e){return e.resolve()}]}}).when("/create/:anameneseId",{templateUrl:"app/main/create.html",controller:"MainController",controllerAs:"main",resolve:{auth:["AuthResolver",function(e){return e.resolve()}]}}).when("/print",{templateUrl:"app/main/print.html",controller:"MainController",controllerAs:"main",resolve:{auth:["AuthResolver",function(e){return e.resolve()}]}}).otherwise({redirectTo:"/login"})}e.$inject=["$routeProvider"],angular.module("medicos2").config(e)}(),angular.module("medicos2").run(["$templateCache",function(e){e.put("app/account/login.html",'<div class="container" style="margin-top: 10%"><div class="row"><div class="col-sm-6 col-md-4 col-md-offset-4"><h2 class="text-center">Entrar no sistema</h2><div class="alert alert-danger" role="alert" ng-show="error"><p class="text-center">{{error.message}}</p></div><div class="well"><form><div class="form-group"><label for="inputUsername">Login</label> <input type="text" class="form-control" id="inputUsername" placeholder="Login" ng-model="user.username"></div><div class="form-group"><label for="inputPassword">Senha</label> <input type="password" class="form-control" id="inputPassword" placeholder="Senha" ng-model="user.password"></div><div class="checkbox"><label><input type="checkbox"> Lembre me</label></div><button type="submit" class="btn btn-default" ng-click="login(user)">Entrar</button></form><p class="text-right"><a ng-href="#/register">Criar Conta</a></p></div></div></div></div>'),e.put("app/account/register.html",'<div class="container" style="margin-top: 10%"><div class="row"><div class="col-sm-6 col-md-4 col-md-offset-4"><h2 class="text-center">Criar Conta</h2><div class="alert alert-danger" role="alert" ng-show="error"><p class="text-center">{{error.message}}</p></div><div class="alert alert-success" role="alert" ng-show="success"><p class="text-center">{{success.message}}</p></div><div class="well"><form><div class="form-group"><label for="inputName">Nome</label> <input type="text" class="form-control" id="inputName" placeholder="Nome" ng-model="user.name"></div><div class="form-group"><label for="inputUsername">Login</label> <input type="text" class="form-control" id="inputUsername" placeholder="Login" ng-model="user.username"></div><div class="form-group"><label for="inputUsername">Email</label> <input type="email" class="form-control" id="inputUsername" placeholder="Email" ng-model="user.email"></div><div class="form-group"><label for="inputPassword">Senha</label> <input type="password" class="form-control" id="inputPassword" placeholder="Senha" ng-model="user.password"></div><button type="submit" class="btn btn-default" ng-click="register(user)">Criar Conta</button></form><p class="text-right"><a ng-href="#/login">Entrar</a></p></div></div></div></div>'),e.put("app/dashboard/dashboard.html",'<div class="container"><div><acme-navbar creationdate="main.creationDate"></acme-navbar></div><newpatient></newpatient><patientsaved></patientsaved><patientupdated></patientupdated><patientremoved></patientremoved><modalpatientremoved></modalpatientremoved><div class="row" ng-hide="newPatient"><div class="col-sm-12 col-md-12"><h2>Lista de Pacientes</h2><button ng-show="patients.length > 0" ng-click="createPatient()" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i> Novo Patiente</button><table class="table table-hover" ng-show="patients.length > 0"><thead><tr><th>Nome</th><th>Convênio</th><th></th></tr></thead><tbody><tr ng-repeat="patient in patients | orderBy: \'nome\'"><td>{{patient.nome}}</td><td>{{patient.convenio}}</td><td><a href="#/patients/{{patient._id}}" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-ok-circle"></i></a> <a ng-click="editPatient(patient._id)" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-edit"></i></a> <button ng-click="openModalRemove(patient)" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#myModalPatient"><i class="glyphicon glyphicon-trash"></i></button></td></tr></tbody></table><div class="well" ng-show="patients === undefined || patients.length < 1"><p>Você ainda não possui nenhum paciente cadastrado. Clique <a ng-click="createPatient()" href="">aqui</a> para cadastrar.</p></div></div></div></div>'),e.put("app/dashboard/modal_remove_patient.html",'<div class="modal fade teste" id="myModalPatient" tabindex="-1" role="dialog" aria-labelledby="myModalLabelPatient" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabelPatient">{{patient.nome}}</h4></div><div class="modal-body">Tem certeza que deseja remover?</div><div class="modal-footer"><button type="button" id="confirmPatientRemove" class="btn btn-danger" ng-click="remove(patient._id)" data-dismiss="modal"><span class="glyphicon glyphicon-ok-sign"></span> Confirmar</button> <button type="button" id="cancelPatientRemove" class="btn btn-default" data-dismiss="modal">Cancelar</button></div></div></div></div>'),e.put("app/dashboard/new_patient.html",'<div class="container" ng-show="newPatient"><div class="row"><div class="col-sm-12 col-md-12"><h2 ng-show="actionForm == \'Salvar\'">Adicionar Paciente</h2><h2 ng-show="actionForm == \'Atualizar\'">Atualizar Paciente</h2><div class="well"><form novalidate="" name="form.patient" ng-submit="actionForm == \'Salvar\' ? save(patient) : update(patient)"><div class="form-group"><label for="inputNome">Nome</label> <input type="text" class="form-control" id="inputNome" placeholder="Nome" ng-model="patient.nome" required=""></div><div class="form-group"><label for="inputConvenio">Convênio</label><select class="form-group" ng-model="patient.convenio" required=""><option></option><option value="GEAP">GEAP</option><option value="Unimed">Unimed</option></select></div><div class="form-group"><div class="row"><div class="col-md-12"><label for="inputEndereco">Endereço</label> <input type="text" class="form-control" id="inputEndereco" placeholder="Endereço" ng-model="patient.endereco" required=""></div></div><div class="row"><div class="col-md-5"><label for="inputBairro">Bairro</label> <input type="text" class="form-control" id="inputBairro" placeholder="Bairro" ng-model="patient.bairro" required=""></div><div class="col-md-5"><label for="inputCidade">Cidade</label> <input type="text" class="form-control" id="inputCidade" placeholder="Cidade" ng-model="patient.cidade" required=""></div><div class="col-md-2"><label for="inputUf">UF</label> <input type="text" class="form-control" id="inputUf" placeholder="UF" ng-model="patient.uf" required=""></div></div></div><button type="submit" class="btn btn-default" ng-disabled="form.patient.$invalid">{{actionForm}}</button> <button class="btn btn-danger" ng-click="cancel()">Cancelar</button></form></div></div></div></div>'),e.put("app/dashboard/patient_removed.html",'<div class="alert alert-danger" role="alert" ng-show="deleted"><p class="text-center">Removido com sucesso.</p></div>'),e.put("app/dashboard/patient_saved.html",'<div class="alert alert-success" role="alert" ng-show="saved"><p class="text-center">Salvo com sucesso.</p></div>'),e.put("app/dashboard/patient_updated.html",'<div class="alert alert-warning" role="alert" ng-show="updated"><p class="text-center">Atualizado com sucesso.</p></div>'),e.put("app/dashboard/show.html",'<div class="container"><div><acme-navbar creationdate="main.creationDate"></acme-navbar></div><div class="row well"><div class="col-md-12"><p>Nome: {{patient.nome}}</p><hr><p>Convênio: {{patient.convenio}}</p><hr><p>Endereço: {{patient.endereco}}, {{patient.bairro}}, {{patient.cidade}} - {{patient.uf}}</p><hr><p class="text-right"><a href="#/dashboard" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-arrow-left"></i> Voltar</a> <a ng-href="#/create/{{patient._id}}" class="btn btn-success btn-sm"><i class="glyphicon glyphicon-book"></i> Criar Anamnese</a></p></div></div></div>'),e.put("app/main/create.html",'<div class="container"><div><acme-navbar creationdate="main.creationDate"></acme-navbar></div><div class="row"><div class="col-sm-12 col-md-12"><div class=""><form class="form-horizontal full-width" name="formPatient.patient"><div class="form-group"><div class="row"><div class="col-md-6"><label for="inputName">Nome do Paciente</label> <input type="text" class="form-control" id="inputName" placeholder="Nome" ng-model="patient.nome"></div><div class="col-md-2"><label for="inputValidadeCarteira">Validade da Carteira</label> <input type="text" class="form-control" id="inputValidadeCarteira" placeholder="" ng-model="patient.validadeCarteira"></div><div class="col-md-2"><label for="inputName">Convênio</label><select class="form-control" ng-model="patient.convenio"><option>Selecione</option><option value="GEAP">GEAP</option><option value="Unimed">Unimed</option></select></div></div></div><div class="form-group"><div class="row"><div class="col-md-6"><label for="inputIndication">Indicação Clínica</label> <input type="text" class="form-control" id="inputIndication" placeholder="Indicação" ng-model="patient.indication"></div><div class="col-md-3"><label for="inputNumberGuia">Número da Guia</label> <input type="text" class="form-control" id="inputNumberGuia" placeholder="Número da guia" ng-model="patient.numberGuia"></div><div class="col-md-3"><label>&nbsp;</label> <input type="text" value="1234" class="form-control" disabled=""></div></div></div><div class="form-group"><div class="row"><div class="col-md-2"><button ng-hide="patient.procedimentos.length >= 5" id="addOnList" ng-click="addOnList()" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-plus"></i> Procedimento</button></div><div class="col-md-3" ng-hide="patient.procedimentos.length == undefined || patient.procedimentos.length == 0"><p for="inputProcedimento" class="text-center">Procedimento</p></div><div class="col-md-6" ng-hide="patient.procedimentos.length == undefined || patient.procedimentos.length == 0"><p for="inputDescription" class="text-center">Descrição do Procedimento</p></div><div class="col-md-1" ng-hide="patient.procedimentos.length == undefined || patient.procedimentos.length == 0"><p for="inputQuantity" class="text-center">Quantidade</p></div></div><div style="margin-top: 10px;" class="row" ng-repeat="lst in patient.procedimentos track by $index"><div class="col-md-1"><button id="removeItemList{{$index}}" ng-click="removeItemList($index)" class="btn btn-danger btn-sm"><i class="glyphicon glyphicon-minus"></i></button></div><div class="col-md-3"><input type="text" class="form-control" id="inputProcedimento" placeholder="Procedimento" ng-model="lst.procedimento"></div><div class="col-md-7"><input type="text" class="form-control" id="inputDescription" placeholder="Descrição" ng-model="lst.descricao"></div><div class="col-md-1"><input type="text" class="form-control" id="inputQuantity" placeholder="Qtd" ng-model="lst.quantidade"></div></div></div><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a data-target="#address" ng-href="/address" aria-controls="address" role="tab" data-toggle="tab">Endereço do Paciente</a></li><li role="presentation"><a data-target="#prescription" ng-href="/prescription" aria-controls="prescription" role="tab" data-toggle="tab">Prescrição Receituário</a></li><li role="presentation"><a data-target="#opme" ng-href="/opme" aria-controls="opme" role="tab" data-toggle="tab">OPME - Solicitados</a></li><li role="presentation"><a data-target="#indication" ng-href="/indication" aria-controls="indication" role="tab" data-toggle="tab">Indicação Cirúrgica</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="address"><div class="form-group"><label for="inputAddress">Endereço</label> <input type="text" class="form-control" id="inputAddress" placeholder="" ng-model="patient.endereco"></div><div class="form-group"><div class="row"><div class="col-md-5"><label for="inputBairro">Bairro</label> <input type="text" class="form-control" id="inputBairro" placeholder="" ng-model="patient.bairro"></div><div class="col-md-5"><label for="inputCidade">Cidade</label> <input type="text" class="form-control" id="inputCidade" placeholder="" ng-model="patient.cidade"></div><div class="col-md-2"><label for="inputEstado">UF</label> <input type="text" class="form-control" id="inputEstado" placeholder="" ng-model="patient.uf"></div></div></div></div><div role="tabpanel" class="tab-pane" id="prescription"><div class="form-group"><div class="row" ng-repeat="count in list3"><div class="col-md-6"><input type="text" class="form-control" id="inputPrCol1" placeholder=""></div><div class="col-md-6"><input type="text" class="form-control" id="inputPrCol2" placeholder=""></div></div></div></div><div role="tabpanel" class="tab-pane" id="opme"><div class="form-group"><div class="row"><div class="col-md-8"><p for="inputDescricaoOpme" class="text-center">Descrição do OPME</p></div><div class="col-md-1"><p for="inputOpmeQuantity" class="text-center">Quantidade</p></div><div class="col-md-3"><p for="inputOpmeFabricante" class="text-center">Descrição do Procedimento</p></div></div><div class="row" ng-repeat="count in list3"><div class="col-md-8"><input type="text" class="form-control" id="inputOpmeDescricao" placeholder=""></div><div class="col-md-1"><input type="text" class="form-control" id="inputQuantity" placeholder=""></div><div class="col-md-3"><input type="text" class="form-control" id="inputDescription" placeholder=""></div></div></div></div><div role="tabpanel" class="tab-pane" id="indication"><div class="form-group"><textarea id="inputindication" class="form-control" placeholder="Indicação Cirúrgica" rows="3" ng-model="patient.cirurgicIndication"></textarea></div></div></div></form></div><div class="form-group"><button type="submit" class="btn btn-default" ng-click="print(patient)"><i class="glyphicon glyphicon-download-alt"></i> Gerar</button> <a href="#/dashboard" class="btn btn-danger">Cancelar</a></div></div></div></div>'),e.put("app/main/print.html",'<div class="container-fluid"><div class="row"><div class="col-md-4"><h5>logo</h5></div><div class="col-md-4"><h5><center>GUIA DE SERVIÇO PROFISSIONAL / SERVIÇO AUXILIAR DE DIAGNÓSTICO E TERAPIA - SP/SADT</center></h5></div><div class="col-md-4"><h6>2 - Nº Guia do Prestador</h6></div></div><div class="row"><div class="col-md-12"><table class="table table-bordered"><tbody><tr><td><span>1 - Registro ANS</span><br><span>121212</span></td><td>Teste</td></tr></tbody></table></div></div></div>{{$root.patientPrint | json}} {{$root.currentUser | json}}'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class="container"><div class="navbar-header"><a class="navbar-brand" ng-href="#/dashboard"><span class="glyphicon glyphicon-home"></span> SisMed</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#/dashboard">Início</a></li><li ng-controller="AccountController"><a href="" ng-click="logout()">Sair</a></li></ul></div></div></nav>')}]);